<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />

    <meta charset="UTF-8" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" type="module"></script>
    <title>Mon Panier</title>
  </head>
  <%- include("../partials/header") %>
  <body>
    <h1>Mon panier</h1>
    <ul id="cart-items"></ul>

    <script>
      async function loadCart(userId) {
        const response = await fetch(`/api/cart/${userId}`);
        const cart = await response.json();

        const cartItems = document.getElementById("cart-items");
        cart.items.forEach((item) => {
          const li = document.createElement("li");
          li.textContent = `${item.product.name} x ${item.quantity} - ${item.product.price}€`;
          cartItems.appendChild(li);
        });
      }

      loadCart(1); // Remplace 1 par l'ID de l'utilisateur connecté
    </script>
  </body>
  <%- include("../partials/footer") %>
</html>
